{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"48789151-f51ae4d97727bedfe2d09c642\";\n\nexport async function fetchImages(query, page = 1, perPage = 40 ) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page,\n                per_page: perPage,\n            },\n        });\n        return response.data; \n    } catch (error) {\n        iziToast.error({\n            position: \"topRight\",\n            message: \"Error fetching images. Please try again!\",\n        });\n        return { hits: [], totalHits: 0 };\n    }\n}\n","export function renderImage(data) {\n    return data.map(image => `\n      <li class=\"gallery-item\">\n        <div class=\"image-cont\">\n          <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n          </a>\n          <div class=\"image-descr\">\n            <div class=\"descr-box\">\n              <p class=\"image-feature\">Likes</p>\n              <p class=\"image-data\">${image.likes}</p>\n            </div>\n            <div class=\"descr-box\">\n              <p class=\"image-feature\">Views</p>\n              <p class=\"image-data\">${image.views}</p>\n            </div>\n            <div class=\"descr-box\">\n              <p class=\"image-feature\">Comments</p>\n              <p class=\"image-data\">${image.comments}</p>\n            </div>\n            <div class=\"descr-box\">\n              <p class=\"image-feature\">Downloads</p>\n              <p class=\"image-data\">${image.downloads}</p>\n            </div>\n          </div>\n        </div>\n      </li>\n    `).join(\"\");\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchImages } from \"./js/pixabay-api\";\nimport { renderImage } from \"./js/render-functions\";\n\nconst refs = {\n    form: document.querySelector(\".search-form\"),\n    input: document.querySelector(\".search-input\"),\n    list: document.querySelector(\".gallery\"),\n    loader: document.querySelector(\".loader\"),\n    loadMoreBtn: document.querySelector(\".load-more\")\n};\n\nlet params = { query: \"\", page: 1, perPage: 40, total: 0 };\nlet lightbox = new SimpleLightbox(\".gallery a\", {\n    captions: true,\n    captionDelay: 250\n});\n\nconst toggleLoadMore = (show) => {\n    if (show) {\n        refs.loadMoreBtn.classList.remove(\"visually-hidden\");\n        refs.loadMoreBtn.classList.add(\"visible\");\n    } else {\n        refs.loadMoreBtn.classList.add(\"visually-hidden\");\n        refs.loadMoreBtn.classList.remove(\"visible\");\n    }\n};\n\nconst toggleLoadMoreDisabled = (disabled) => {\n    if (disabled) {\n        refs.loadMoreBtn.classList.add(\"disabled\");\n        refs.loadMoreBtn.disabled = true;\n    } else {\n        refs.loadMoreBtn.classList.remove(\"disabled\");\n        refs.loadMoreBtn.disabled = false;\n    }\n};\n\nrefs.form.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n    params.query = refs.input.value.trim();\n\n    if (!params.query)\n        return iziToast.error({\n            message: \"Please enter some text\",\n        });\n\n    refs.list.innerHTML = \"\";\n    params.page = 1;\n    params.total = 0;\n    toggleLoader(true);\n    toggleLoadMore(false);\n    await fetchAndRenderImages();\n});\n        \nrefs.loadMoreBtn.addEventListener(\"click\", async () => {\n    params.page++;\n    toggleLoader(true);\n    toggleLoadMoreDisabled(true);\n    await fetchAndRenderImages();\n});\n   \nasync function fetchAndRenderImages() {\n    try {\n        const { hits, totalHits } = await fetchImages(params.query, params.page);\n        params.total = totalHits;\n\n        if (!hits.length) return iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n        });\n         \n        refs.list.insertAdjacentHTML(\"beforeend\", renderImage(hits));\n        lightbox.refresh();\n        smoothScroll();\n        if (params.page * params.perPage >= params.total) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results\"\n            });\n            toggleLoadMore(false);\n        } else {\n            toggleLoadMore(true);\n        }\n    } catch (error) {\n      } finally {\n         toggleLoader(false);\n         toggleLoadMoreDisabled(false);\n    }\n}\n\nconst toggleLoader = (show) => refs.loader.classList.toggle(\"visually-hidden\", !show);\nconst smoothScroll = () => window.scrollBy({top: refs.list.firstElementChild.getBoundingClientRect().height * 2, behavior: \"smooth\" });\n    \n   \n\n\n\n"],"names":["BASE_URL","API_KEY","fetchImages","query","page","perPage","axios","iziToast","renderImage","data","image","refs","params","lightbox","SimpleLightbox","toggleLoadMore","show","toggleLoadMoreDisabled","disabled","toggleLoader","fetchAndRenderImages","hits","totalHits","smoothScroll"],"mappings":"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"}