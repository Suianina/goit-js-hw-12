{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"48789151-f51ae4d97727bedfe2d09c642\";\n\nexport async function getImages(query, page){\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page,\n                per_page: 40,\n            },\n        });\n        return response.data;\n    }","export function renderImage(data) {\n    return data.map(image => `\n      <li class=\"gallery-item\">\n        <div class=\"image-cont\">\n          <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n          </a>\n          <div class=\"image-descr\">\n            <div class=\"descr-box\">\n              <p class=\"image-feature\">Likes</p>\n              <p class=\"image-data\">${image.likes}</p>\n            </div>\n            <div class=\"descr-box\">\n              <p class=\"image-feature\">Views</p>\n              <p class=\"image-data\">${image.views}</p>\n            </div>\n            <div class=\"descr-box\">\n              <p class=\"image-feature\">Comments</p>\n              <p class=\"image-data\">${image.comments}</p>\n            </div>\n            <div class=\"descr-box\">\n              <p class=\"image-feature\">Downloads</p>\n              <p class=\"image-data\">${image.downloads}</p>\n            </div>\n          </div>\n        </div>\n      </li>\n    `).join(\"\");\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { getImages } from \"./js/pixabay-api\";\nimport { renderImage } from \"./js/render-functions\";\n\n\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-input');\nconst list = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader')\n\nlet currentPage;\nlet currentQuery = '';\nlet maxPage;\nconst perPage = 40;\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionDelay: 250,\n  captionPosition: 'bottom',\n  captionsData: 'alt',\n});\n\nform.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  currentQuery = event.target.elements.query.value.trim();\n  currentPage = 1;\n\n  if (!currentQuery) {\n    iziToast.error({\n      position: \"topRight\",\n      message: 'Please enter some text',\n    });\n    hideLoader();\n    return;\n  }\n\n  showLoader();\n  hideLoadBtn();\n  list.innerHTML = '';\n\n  try {\n    const data = await getImages(currentQuery, currentPage);\n    maxPage = Math.ceil(data.totalHits / perPage);\n\n    if (data.hits && data.hits.length > 0) {\n      const markup = renderImage(data.hits);\n      list.insertAdjacentHTML(\"beforeend\", markup);\n\n      hideLoader();\n      hideLoadBtn();\n\n      lightbox.refresh();\n    } else {\n      iziToast.error({\n        position: \"topRight\",\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      })\n      hideLoader();\n      hideLoadBtn();\n    }\n  } catch (err) {\n    hideLoadBtn();\n    hideLoader();\n\n    iziToast.error({\n      position: \"topRight\",\n      message: 'Sorry, the request can\\'t be completed at this time. Please try again',\n    })\n  }\n\n  input.value = '';\n  updateBtnStatus();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage++;\n  showLoader();\n  hideLoadBtn();\n\n  try {\n    const data = await getImages(currentQuery, currentPage);\n    const markup = renderImage(data.hits);\n    list.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n    scrollPage();\n  } catch (err) {\n    console.log(err);\n    iziToast.error({\n      position: \"bottomRight\",\n      message: 'Sorry, the request can\\'t be completed at this time. Please try again',\n    })\n  }\n\n  hideLoader();\n  updateBtnStatus();\n});\n\nfunction showLoadBtn() {\n  loadMoreBtn.classList.remove('visually-hidden');\n}\n\nfunction hideLoadBtn() {\n  loadMoreBtn.classList.add('visually-hidden');\n}\n\nfunction showLoader() {\n  loader.classList.remove('visually-hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('visually-hidden');\n}\n\nfunction updateBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadBtn();\n\n    if (maxPage) {\n      iziToast.info({\n        position: \"bottomRight\",\n        message: 'We\\'re sorry, but you\\'ve reached the end of search results',\n      })\n    hideLoadBtn();\n    }\n  } else {\n    showLoadBtn();\n  }\n}\n\nfunction scrollPage() {\n  const liElem = list.children[0];\n  const height = liElem.getBoundingClientRect().height;\n\n  scrollBy({\n    top: height * 2,\n    behavior: \"smooth\",\n  });\n}"],"names":["BASE_URL","API_KEY","getImages","query","page","axios","renderImage","data","image","loadMoreBtn","form","input","list","loader","currentPage","currentQuery","maxPage","perPage","lightbox","SimpleLightbox","event","iziToast","hideLoader","showLoader","hideLoadBtn","markup","updateBtnStatus","scrollPage","err","showLoadBtn","height"],"mappings":"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"}